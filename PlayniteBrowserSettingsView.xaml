<UserControl x:Class="PlayniteBrowser.PlayniteBrowserSettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:PlayniteBrowser"
             mc:Ignorable="d"
             d:DesignHeight="400" d:DesignWidth="600">
    <StackPanel>
        <TextBlock Text="Browser Executable Path:" Margin="0,0,0,5"/>
        <DockPanel Margin="0,0,0,10">
            <Button Content="Browse..."
                    Command="{Binding BrowseCommand}"
                    DockPanel.Dock="Right"
                    Margin="5,0,0,0"
                    Padding="10,0"/>
            <TextBox Text="{Binding Settings.BrowserExecutablePath}"/>
        </DockPanel>

        <TextBlock Text="Browser Type (auto-detected):" Margin="0,0,0,5"/>
        <ComboBox SelectedItem="{Binding Settings.BrowserType}"
                  Margin="0,0,0,10"
                  ToolTip="Browser type is automatically detected from the executable path. You can manually override if needed.">
            <ComboBox.Items>
                <x:Static Member="local:BrowserType.Chromium"/>
                <x:Static Member="local:BrowserType.Firefox"/>
            </ComboBox.Items>
        </ComboBox>

        <DockPanel Margin="0,0,0,20">
            <Button Content="Open Shared Profile"
                    Command="{Binding OpenSharedProfileCommand}"
                    DockPanel.Dock="Right"
                    Margin="5,0,0,0"
                    Padding="10,5"
                    ToolTip="Launches the browser with the shared profile. Only enabled when 'Use shared browser profile for all games' is checked."/>
            <CheckBox Content="Use shared browser profile for all games"
                      IsChecked="{Binding Settings.UseSharedProfile}"
                      VerticalAlignment="Center"
                      ToolTip="When enabled, all games will share the same browser profile (cookies, cache, etc.). When disabled, each game gets its own isolated profile. This can lead to issues if you launch multiple games at once"/>
        </DockPanel>

        <TextBlock Text="Browser Games:" Margin="0,0,0,5"/>
        <DataGrid ItemsSource="{Binding Settings.BrowserGames}"
                  SelectedItem="{Binding SelectedGame}"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  CanUserDeleteRows="False"
                  Height="250"
                  Margin="0,0,0,10">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Name"
                                    Binding="{Binding Name, UpdateSourceTrigger=PropertyChanged}"
                                    Width="*"/>
                <DataGridTextColumn Header="URL"
                                    Binding="{Binding Url, UpdateSourceTrigger=PropertyChanged}"
                                    Width="2*"/>
            </DataGrid.Columns>
        </DataGrid>

        <StackPanel Orientation="Horizontal">
            <Button Content="Add Game"
                    Command="{Binding AddGameCommand}"
                    Margin="0,0,5,0"
                    Padding="10,5"/>
            <Button Content="Remove Selected"
                    Command="{Binding RemoveGameCommand}"
                    Margin="0,0,5,0"
                    Padding="10,5"/>
            <Button Content="Open Game Profile"
                    Command="{Binding OpenProfileCommand}"
                    Padding="10,5"
                    ToolTip="Launches the browser with the selected game's profile. Use this to install extensions, modify settings, etc. for this specific game."/>
        </StackPanel>
    </StackPanel>
</UserControl>